# AutoZig Examples

æœ¬ç›®å½•åŒ…å«AutoZigçš„æ‰€æœ‰ç¤ºä¾‹é¡¹ç›®ï¼Œå±•ç¤ºäº†å„ç§ç‰¹æ€§å’Œä½¿ç”¨åœºæ™¯ã€‚

## ç¤ºä¾‹åˆ—è¡¨

### åŸºç¡€ç¤ºä¾‹

1. **structs** - ç»“æ„ä½“ç»‘å®š
   - å±•ç¤ºå¦‚ä½•åœ¨Rustå’ŒZigä¹‹é—´ä¼ é€’ç»“æ„ä½“
   - åŒ…å«åµŒå¥—ç»“æ„ä½“å’Œå¤åˆ¶è¯­ä¹‰

2. **enums** - æšä¸¾ç±»å‹
   - å±•ç¤ºResultå’ŒOptionç±»å‹çš„FFIç»‘å®š
   - è‡ªå®šä¹‰æšä¸¾å’ŒçŠ¶æ€æœºç¤ºä¾‹

3. **complex** - å¤æ‚ç±»å‹
   - æ³›å‹ç»“æ„ä½“ï¼ˆPair, Tripleï¼‰
   - åµŒå¥—å¤æ‚ç±»å‹å¤„ç†

### é«˜çº§ç¤ºä¾‹

4. **smart_lowering** - æ™ºèƒ½ç±»å‹é™çº§
   - å­—ç¬¦ä¸²ï¼ˆ&strï¼‰è‡ªåŠ¨è½¬æ¢ä¸ºptr+len
   - åˆ‡ç‰‡ï¼ˆ&[T]ï¼‰è‡ªåŠ¨è½¬æ¢ä¸ºptr+len
   - å±•ç¤ºPhase 2çš„Smart Loweringç‰¹æ€§

5. **external** - å¤–éƒ¨Zigæ–‡ä»¶
   - ä½¿ç”¨`include_zig!`å®å¼•ç”¨å¤–éƒ¨.zigæ–‡ä»¶
   - åŒ…å«Zigæµ‹è¯•é›†æˆ

6. **security_tests** - å®‰å…¨æµ‹è¯•
   - å†…å­˜å®‰å…¨éªŒè¯
   - è¾¹ç•Œæ£€æŸ¥æµ‹è¯•
   - Zero-unsafeä»£ç éªŒè¯

### Traitæ”¯æŒç¤ºä¾‹

7. **trait_calculator** - Traitå®ç°ï¼ˆæ— çŠ¶æ€ï¼‰
   - å±•ç¤ºZST (Zero-Sized Type)çš„traitå®ç°
   - Calculator traitç¤ºä¾‹

8. **trait_hasher** - Traitå®ç°ï¼ˆæœ‰çŠ¶æ€ï¼‰
   - å±•ç¤ºOpaque Pointerçš„traitå®ç°
   - Hasher traitç¤ºä¾‹
   - åŒ…å«æ„é€ å‡½æ•°å’Œææ„å‡½æ•°

### Phase 3 ç¤ºä¾‹

9. **generics** - æ³›å‹å•æ€åŒ–
   - ä½¿ç”¨`#[monomorphize(...)]`å±æ€§
   - è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªç±»å‹çš„å•æ€åŒ–ç‰ˆæœ¬
   - ç¤ºä¾‹ï¼š`sum<T>`, `max<T>`

10. **async** - å¼‚æ­¥FFI
    - ä½¿ç”¨`async fn`å…³é”®å­—
    - é‡‡ç”¨`tokio::spawn_blocking`æ¨¡å¼
    - Zigä¾§ä¿æŒåŒæ­¥å®ç°
    - å±•ç¤ºå¹¶å‘æ‰§è¡Œå’Œæ··åˆasync/syncä½¿ç”¨

### Phase 4 ç¤ºä¾‹

11. **zig-c** - Zig-C äº’æ“ä½œ
    - Zigè°ƒç”¨Cä»£ç ç¤ºä¾‹
    - Cæºæ–‡ä»¶è‡ªåŠ¨ç¼–è¯‘
    - å±•ç¤ºæ··åˆè¯­è¨€å¼€å‘

12. **stream_basic** - æµå¼æ•°æ®å¤„ç†
    - Iterator traitå®ç°
    - æµå¼FFIä¼ è¾“
    - é›¶æ‹·è´æ•°æ®å¤„ç†

13. **simd_detect** - SIMDç‰¹æ€§æ£€æµ‹
    - è¿è¡Œæ—¶CPUç‰¹æ€§æ£€æµ‹
    - SIMDåŠ é€Ÿç¤ºä¾‹
    - æ€§èƒ½å¯¹æ¯”

14. **zero_copy** - é›¶æ‹·è´ç¼“å†²åŒº
    - å…±äº«å†…å­˜ç¼“å†²åŒº
    - é¿å…æ•°æ®æ‹·è´
    - é«˜æ€§èƒ½æ•°æ®ä¼ è¾“

### Phase 5 ç¤ºä¾‹

15. **wasm_filter** - WebAssemblyå›¾åƒæ»¤é•œ ğŸš€
    - **Zig SIMDä¼˜åŒ–** - ä½¿ç”¨ `@Vector` è¿›è¡Œå‘é‡åŒ–
    - **æ€§èƒ½å¯¹æ¯”** - AutoZig vs Rust Native vs JavaScript
    - **WASM SIMD128** - å¯ç”¨ `v128.*` æŒ‡ä»¤é›†
    - **å®æ—¶å›¾åƒå¤„ç†** - åè‰²ã€ç°åº¦ã€äº®åº¦è°ƒæ•´
    - **äº¤äº’å¼Demo** - æµè§ˆå™¨ä¸­è¿è¡Œçš„å®Œæ•´ç¤ºä¾‹
    - éœ€è¦ `wasm-pack`: `cargo install wasm-pack`

## æ‰¹é‡éªŒè¯è„šæœ¬

ä½¿ç”¨ `verify_all.sh` è„šæœ¬å¯ä»¥ä¸€æ¬¡æ€§éªŒè¯æ‰€æœ‰ç¤ºä¾‹ï¼š

```bash
cd examples
./verify_all.sh
```

### è„šæœ¬åŠŸèƒ½

- âœ… è‡ªåŠ¨æ¸…ç†ã€ç¼–è¯‘å’Œè¿è¡Œæ‰€æœ‰ç¤ºä¾‹
- âœ… å½©è‰²è¾“å‡ºï¼Œæ˜“äºé˜…è¯»
- âœ… è¯¦ç»†çš„é”™è¯¯æŠ¥å‘Š
- âœ… è¶…æ—¶ä¿æŠ¤ï¼ˆ30ç§’ï¼‰
- âœ… ç»Ÿè®¡æ€»ç»“ï¼ˆæˆåŠŸ/å¤±è´¥/è·³è¿‡ï¼‰

### è¾“å‡ºç¤ºä¾‹

```
======================================
  AutoZig Examples éªŒè¯å·¥å…·
======================================

[INFO] Examplesç›®å½•: /path/to/examples
[INFO] å¼€å§‹æ‰¹é‡éªŒè¯...

======================================
  éªŒè¯ç¤ºä¾‹: Structs Example
======================================

[INFO] æ¸…ç†æ„å»ºäº§ç‰©...
[INFO] ç¼–è¯‘é¡¹ç›®...
[âœ“] Structs Example: ç¼–è¯‘æˆåŠŸ
[INFO] è¿è¡Œé¡¹ç›®...
[âœ“] Structs Example: è¿è¡ŒæˆåŠŸ

...

======================================
  éªŒè¯ç»“æœæ€»ç»“
======================================

æ€»è®¡: 10 ä¸ªç¤ºä¾‹
æˆåŠŸ: 10
å¤±è´¥: 0
è·³è¿‡: 0
[âœ“] æ‰€æœ‰ç¤ºä¾‹éªŒè¯é€šè¿‡ï¼ğŸ‰
```

## å•ç‹¬è¿è¡Œç¤ºä¾‹

### æ ‡å‡†ç¤ºä¾‹

æ¯ä¸ªç¤ºä¾‹éƒ½æ˜¯ç‹¬ç«‹çš„Cargoé¡¹ç›®ï¼Œå¯ä»¥å•ç‹¬è¿è¡Œï¼š

```bash
# è¿›å…¥ç¤ºä¾‹ç›®å½•
cd structs

# ç¼–è¯‘
cargo build

# è¿è¡Œ
cargo run

# æµ‹è¯•ï¼ˆå¦‚æœæœ‰testsç›®å½•ï¼‰
cargo test
```

### WASMç¤ºä¾‹ï¼ˆç‰¹æ®Šï¼‰

WASMç¤ºä¾‹éœ€è¦ä½¿ç”¨ `wasm-pack` ç¼–è¯‘ï¼š

```bash
# è¿›å…¥WASMç¤ºä¾‹ç›®å½•
cd wasm_filter

# å®‰è£… wasm-packï¼ˆé¦–æ¬¡ï¼‰
cargo install wasm-pack

# ç¼–è¯‘ä¸ºWASM
wasm-pack build --target web --release

# å¤åˆ¶åˆ°wwwç›®å½•
cp -r pkg/* www/pkg/

# å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
cd www && python3 -m http.server 9999

# æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:9999
```

## ç¤ºä¾‹ç»“æ„

æ¯ä¸ªç¤ºä¾‹é€šå¸¸åŒ…å«ï¼š

```
example_name/
â”œâ”€â”€ Cargo.toml       # é¡¹ç›®é…ç½®
â”œâ”€â”€ build.rs         # æ„å»ºè„šæœ¬ï¼ˆè°ƒç”¨autozig_buildï¼‰
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs      # Rustä»£ç ï¼ŒåŒ…å«autozig!å®è°ƒç”¨
â”‚   â””â”€â”€ *.zig        # Zigå®ç°ï¼ˆå¯é€‰ï¼Œç”¨äºexternalç¤ºä¾‹ï¼‰
â””â”€â”€ tests/           # é›†æˆæµ‹è¯•ï¼ˆå¯é€‰ï¼‰
```

## å­¦ä¹ è·¯å¾„å»ºè®®

### åˆå­¦è€…
1. å…ˆçœ‹ **structs** - ç†è§£åŸºæœ¬çš„ç»“æ„ä½“ç»‘å®š
2. ç„¶åçœ‹ **enums** - ç†è§£æšä¸¾å’ŒResult/Optionç±»å‹
3. å†çœ‹ **smart_lowering** - äº†è§£è‡ªåŠ¨ç±»å‹è½¬æ¢

### ä¸­çº§ç”¨æˆ·
4. **complex** - å­¦ä¹ å¤æ‚åµŒå¥—ç±»å‹
5. **external** - å­¦ä¹ å¦‚ä½•ä½¿ç”¨å¤–éƒ¨Zigæ–‡ä»¶
6. **trait_calculator** / **trait_hasher** - å­¦ä¹ traitå®ç°

### é«˜çº§ç”¨æˆ·
7. **generics** - å­¦ä¹ æ³›å‹å•æ€åŒ–ï¼ˆPhase 3ï¼‰
8. **async** - å­¦ä¹ å¼‚æ­¥FFIï¼ˆPhase 3ï¼‰
9. **stream_basic** - å­¦ä¹ æµå¼æ•°æ®å¤„ç†ï¼ˆPhase 4.1ï¼‰
10. **simd_detect** - å­¦ä¹ SIMDä¼˜åŒ–ï¼ˆPhase 4.2ï¼‰
11. **wasm_filter** - å­¦ä¹ WebAssemblyå¼€å‘ï¼ˆPhase 5.0ï¼‰
12. **security_tests** - äº†è§£å®‰å…¨æœ€ä½³å®è·µ

## æŠ€æœ¯è¦ç‚¹

### Phase 1 & 2 ç‰¹æ€§
- âœ… ç»“æ„ä½“å’Œæšä¸¾çš„è‡ªåŠ¨ç»‘å®š
- âœ… Smart Loweringï¼ˆ&str, &[T] è‡ªåŠ¨è½¬æ¢ï¼‰
- âœ… Traitæ”¯æŒï¼ˆZSTå’ŒOpaque Pointerï¼‰
- âœ… å¤–éƒ¨Zigæ–‡ä»¶å¼•ç”¨
- âœ… Zigæµ‹è¯•é›†æˆ

### Phase 3 ç‰¹æ€§
- âœ… æ³›å‹å•æ€åŒ–ï¼ˆ`#[monomorphize(...)]`ï¼‰
- âœ… å¼‚æ­¥FFIï¼ˆ`async fn` + `spawn_blocking`ï¼‰
- âœ… ç±»å‹æ›¿æ¢å¼•æ“
- âœ… Name manglingç­–ç•¥

### Phase 4 ç‰¹æ€§
- âœ… Zig-Cäº’æ“ä½œï¼ˆè‡ªåŠ¨ç¼–è¯‘Cæºæ–‡ä»¶ï¼‰
- âœ… æµå¼æ•°æ®å¤„ç†ï¼ˆIterator traitï¼‰
- âœ… SIMDç‰¹æ€§æ£€æµ‹å’Œä¼˜åŒ–
- âœ… é›¶æ‹·è´ç¼“å†²åŒº

### Phase 5 ç‰¹æ€§ ğŸš€
- âœ… WebAssemblyæ”¯æŒï¼ˆ`wasm32-freestanding`ç›®æ ‡ï¼‰
- âœ… WASM SIMD128ä¼˜åŒ–ï¼ˆ`-mcpu=mvp+simd128`ï¼‰
- âœ… Zigå‘é‡åŒ–ï¼ˆ`@Vector(16, u8)`ï¼‰
- âœ… æ€§èƒ½å¯¹æ¯”Demoï¼ˆAutoZig vs Rust vs JSï¼‰
- âœ… æµè§ˆå™¨å®æ—¶æ¸²æŸ“

## å¸¸è§é—®é¢˜

### Q: ç¼–è¯‘å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ï¼š
1. Zigç‰ˆæœ¬æ˜¯å¦æ­£ç¡®ï¼ˆ0.11+ï¼‰
2. Rustç‰ˆæœ¬æ˜¯å¦æ­£ç¡®ï¼ˆ1.77+ï¼‰
3. æŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼š`cargo build -vv`

### Q: å¦‚ä½•è°ƒè¯•Zigä»£ç ï¼Ÿ
A: 
1. æŸ¥çœ‹ç”Ÿæˆçš„Zigä»£ç ï¼š`target/debug/build/*/out/generated_autozig.zig`
2. ä½¿ç”¨Zigçš„æµ‹è¯•åŠŸèƒ½ï¼ˆå‚è§externalç¤ºä¾‹ï¼‰
3. æ·»åŠ Zigçš„debugæ‰“å°

### Q: WASMç¤ºä¾‹æ— æ³•ç¼–è¯‘ï¼Ÿ
A: æ£€æŸ¥ï¼š
1. æ˜¯å¦å®‰è£…äº† `wasm-pack`: `cargo install wasm-pack`
2. æ˜¯å¦æ·»åŠ äº†WASMç›®æ ‡: `rustup target add wasm32-unknown-unknown`
3. æµè§ˆå™¨æ˜¯å¦æ”¯æŒSIMD128ï¼ˆChrome 91+, Firefox 89+, Safari 16.4+ï¼‰

### Q: å¦‚ä½•æ·»åŠ æ–°ç¤ºä¾‹ï¼Ÿ
A:
1. å¤åˆ¶ç°æœ‰ç¤ºä¾‹ä½œä¸ºæ¨¡æ¿
2. ä¿®æ”¹Cargo.tomlå’Œä»£ç 
3. åœ¨Cargo.tomlï¼ˆworkspace rootï¼‰çš„membersä¸­æ·»åŠ 
4. åœ¨verify_all.shçš„EXAMPLESæˆ–WASM_EXAMPLESæ•°ç»„ä¸­æ·»åŠ 
5. è¿è¡Œ`./verify_all.sh`éªŒè¯

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®æ–°çš„ç¤ºä¾‹ï¼è¯·ç¡®ä¿ï¼š
- âœ… ä»£ç ç®€æ´æ˜“æ‡‚
- âœ… åŒ…å«è¯¦ç»†æ³¨é‡Š
- âœ… é€šè¿‡`verify_all.sh`éªŒè¯
- âœ… æ·»åŠ åˆ°æœ¬READMEçš„ç¤ºä¾‹åˆ—è¡¨

## è®¸å¯è¯

æ‰€æœ‰ç¤ºä¾‹ä»£ç éµå¾ªAutoZigé¡¹ç›®çš„è®¸å¯è¯ï¼ˆMIT OR Apache-2.0ï¼‰ã€‚